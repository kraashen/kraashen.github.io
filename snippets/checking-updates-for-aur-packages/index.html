<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Checking Updates and Updating AUR Packages by Scripting | tracing bytes</title>
<meta name=keywords content="linux,arch"><meta name=description content="AUR packages by default are managed as Git repositories that contain PKGBUILD package descriptions. These description files allow users to compile packages from sources with makepkg, and then installing them using pacman.
To help managing these packages as your collection inevitably grows, various wrapper tools exist, such as an excellent Go-based tool named yay.
Arch wiki states, that it is recommended to use and understand the manual flow first before diving into AUR tooling."><meta name=author content><link rel=canonical href=https://kraashen.github.io/snippets/checking-updates-for-aur-packages/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=https://kraashen.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://kraashen.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://kraashen.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://kraashen.github.io/apple-touch-icon.png><link rel=mask-icon href=https://kraashen.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://kraashen.github.io/snippets/checking-updates-for-aur-packages/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Checking Updates and Updating AUR Packages by Scripting"><meta property="og:description" content="AUR packages by default are managed as Git repositories that contain PKGBUILD package descriptions. These description files allow users to compile packages from sources with makepkg, and then installing them using pacman.
To help managing these packages as your collection inevitably grows, various wrapper tools exist, such as an excellent Go-based tool named yay.
Arch wiki states, that it is recommended to use and understand the manual flow first before diving into AUR tooling."><meta property="og:type" content="article"><meta property="og:url" content="https://kraashen.github.io/snippets/checking-updates-for-aur-packages/"><meta property="article:section" content="snippets"><meta property="article:published_time" content="2021-04-08T00:00:00+00:00"><meta property="article:modified_time" content="2021-04-08T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Checking Updates and Updating AUR Packages by Scripting"><meta name=twitter:description content="AUR packages by default are managed as Git repositories that contain PKGBUILD package descriptions. These description files allow users to compile packages from sources with makepkg, and then installing them using pacman.
To help managing these packages as your collection inevitably grows, various wrapper tools exist, such as an excellent Go-based tool named yay.
Arch wiki states, that it is recommended to use and understand the manual flow first before diving into AUR tooling."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Snippets","item":"https://kraashen.github.io/snippets/"},{"@type":"ListItem","position":2,"name":"Checking Updates and Updating AUR Packages by Scripting","item":"https://kraashen.github.io/snippets/checking-updates-for-aur-packages/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Checking Updates and Updating AUR Packages by Scripting","name":"Checking Updates and Updating AUR Packages by Scripting","description":"AUR packages by default are managed as Git repositories that contain PKGBUILD package descriptions. These description files allow users to compile packages from sources with makepkg, and then installing them using pacman.\nTo help managing these packages as your collection inevitably grows, various wrapper tools exist, such as an excellent Go-based tool named yay.\nArch wiki states, that it is recommended to use and understand the manual flow first before diving into AUR tooling.","keywords":["linux","arch"],"articleBody":"AUR packages by default are managed as Git repositories that contain PKGBUILD package descriptions. These description files allow users to compile packages from sources with makepkg, and then installing them using pacman.\nTo help managing these packages as your collection inevitably grows, various wrapper tools exist, such as an excellent Go-based tool named yay.\nArch wiki states, that it is recommended to use and understand the manual flow first before diving into AUR tooling. So, what could be more fun thanâ€¦ making own yet-another-aur-management-tool?\nFor tooling in this case, I chose shell scripting due to just pretty much to use uxisting tooling to automate the flow as if cloning the PKGBUILD repos, compiling, and installing them manually. Process for installing and updating AUR packages is described in Arch Wiki, so with few lines of shell script (tm) we can automate both checking safely for updates similarly as checkupdates tool from pacman-contrib package and updating individual packages if they have updates available.\n$ aur-checkupdates spotify 1:1.1.55.498-2 -\u003e 1:1.1.56.595-1 $ aur-update -ri spotify This was a fun mini-project in the spirit of keeping things simple(ish) by using the existing CLI tooling.\nScripts .zshrc # ... # AUR management export AUR_PACKAGES_PATH=\"$HOME/Packages\" Checking for updates #!/bin/bash # # Check if foreign packages installed have updates available in # AUR. # # Return codes: # 0 = Updates available # 1 = Something went wrong # 2 = No updates available # # Author: Tomi Juntunen # # This program is free software: you can redistribute it and/or modify # it under the terms of the GNU General Public License as published by # the Free Software Foundation, either version 3 of the License, or # (at your option) any later version. # # This program is distributed in the hope that it will be useful, # but WITHOUT ANY WARRANTY; without even the implied warranty of # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the # GNU General Public License for more details. # # You should have received a copy of the GNU General Public License # along with this program. If not, see . if ! command -v jq \u003e /dev/null; then echo \"jq is needed for this script to run\" \u003e\u00262 exit 1 fi AUR_API=\"https://aur.archlinux.org/rpc/?v=5\u0026type=info\" Args=\"\" InstalledPackages=$(pacman --query --foreign) # Go through installed foreign packages and construct # HTTP query based on them while read -r Package; do PackageName=${Package%[[:space:]]*} Args=\"${Args}\u0026arg[]=$PackageName\" done \u003c\u003c\u003c \"${InstalledPackages}\" Response=$(curl --silent \"${AUR_API}\"\"${Args}\") Results=\"$(jq --raw-output .results \u003c\u003c\u003c \"${Response}\")\" Output=$\"\" while read -r Package; do PackageName=${Package%[[:space:]]*} InstalledPackageVersion=${Package#*[[:space:]]} RemotePackage=\"\" RemotePackageInfo=\"\" while read -r Remote; do RemotePackage=$(jq --raw-output .Name \u003c\u003c\u003c \"${Remote}\") [[ \"${RemotePackage}\" != \"${PackageName}\" ]] \u0026\u0026 continue RemotePackageInfo=\"${Remote}\" break done \u003c\u003c\u003c \"$(jq --compact-output '.[]' \u003c\u003c\u003c \"${Results}\")\" if [[ -z ${RemotePackageInfo} ]]; then echo \"No package info found for package ${PackageName}\" \u003e\u00262 continue fi RemotePackageVersion=$(jq --raw-output .Version \u003c\u003c\u003c \"${RemotePackageInfo}\") # Check if the remote package is of a newer version than installed one and store results # in the output string if [[ \"${RemotePackageVersion}\" != \"${InstalledPackageVersion}\" ]]; then if [[ \"${Output}\" = \"\" ]]; then Output=$\"${Output}${PackageName} ${InstalledPackageVersion} -\u003e ${RemotePackageVersion}\" continue fi Output=$\"${Output}\\n${PackageName} ${InstalledPackageVersion} -\u003e ${RemotePackageVersion}\" fi done \u003c\u003c\u003c \"${InstalledPackages}\" if [[ -z \"${Output}\" ]]; then exit 2 else echo -e \"${Output}\" exit 0 fi Installing Update #!/bin/bash # # Update an AUR package to latest version (using Git and makepkg). # Return codes: # 0 = Updates available # 1 = Something went wrong # 2 = No updates available # # Author: Tomi Juntunen # # This program is free software: you can redistribute it and/or modify # it under the terms of the GNU General Public License as published by # the Free Software Foundation, either version 3 of the License, or # (at your option) any later version. # # This program is distributed in the hope that it will be useful, # but WITHOUT ANY WARRANTY; without even the implied warranty of # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the # GNU General Public License for more details. # # You should have received a copy of the GNU General Public License # along with this program. If not, see . AUR_API=\"https://aur.archlinux.org/rpc/?v=5\u0026type=info\" function print_usage { cat \u003c","wordCount":"1062","inLanguage":"en","datePublished":"2021-04-08T00:00:00Z","dateModified":"2021-04-08T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://kraashen.github.io/snippets/checking-updates-for-aur-packages/"},"publisher":{"@type":"Organization","name":"tracing bytes","logo":{"@type":"ImageObject","url":"https://kraashen.github.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://kraashen.github.io/ accesskey=h title="tracing bytes (Alt + H)">tracing bytes</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://kraashen.github.io/ title=Home><span>Home</span></a></li><li><a href=https://kraashen.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://kraashen.github.io/snippets/ title=Snippets><span>Snippets</span></a></li><li><a href=https://kraashen.github.io/my-library/ title="My Library"><span>My Library</span></a></li><li><a href=https://kraashen.github.io/interests/ title=Interests><span>Interests</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Checking Updates and Updating AUR Packages by Scripting</h1><div class=post-meta><span title='2021-04-08 00:00:00 +0000 UTC'>April 8, 2021</span></div></header><div class=post-content><p><a href=https://wiki.archlinux.org/index.php/Arch_User_Repository>AUR packages</a>
by default are managed as Git repositories that contain <code>PKGBUILD</code> package
descriptions. These description files allow users to compile packages
from sources with <code>makepkg</code>, and then installing them using <code>pacman</code>.</p><p>To help managing these packages as your collection inevitably grows,
various wrapper tools exist, such as an excellent Go-based tool named <code>yay</code>.</p><p>Arch wiki states, that it is recommended to use and understand the manual
flow first before diving into AUR tooling. So, what could be more fun than&mldr;
making own yet-another-aur-management-tool?</p><p>For tooling in this case, I chose shell scripting due to just pretty much
to use uxisting tooling to automate the flow as if cloning the PKGBUILD
repos, compiling, and installing them manually. Process for installing
and updating AUR packages is described in
<a href=https://wiki.archlinux.org/index.php/Arch_User_Repository#Installing_and_upgrading_packages>Arch Wiki</a>,
so with few lines of shell script (tm) we can automate both checking safely for updates
similarly as <code>checkupdates</code> tool from <code>pacman-contrib</code> package and updating
individual packages if they have updates available.</p><pre tabindex=0><code>$ aur-checkupdates
spotify 1:1.1.55.498-2 -&gt; 1:1.1.56.595-1
$ aur-update -ri spotify
</code></pre><p>This was a fun mini-project in the spirit of keeping things simple(ish)
by using the existing CLI tooling.</p><h2 id=scripts>Scripts<a hidden class=anchor aria-hidden=true href=#scripts>#</a></h2><h3 id=zshrc>.zshrc<a hidden class=anchor aria-hidden=true href=#zshrc>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># AUR management</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>AUR_PACKAGES_PATH</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$HOME</span><span class=s2>/Packages&#34;</span>
</span></span></code></pre></div><h3 id=checking-for-updates>Checking for updates<a hidden class=anchor aria-hidden=true href=#checking-for-updates>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># Check if foreign packages installed have updates available in</span>
</span></span><span class=line><span class=cl><span class=c1># AUR.</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># Return codes:</span>
</span></span><span class=line><span class=cl><span class=c1>#   0 = Updates available</span>
</span></span><span class=line><span class=cl><span class=c1>#   1 = Something went wrong</span>
</span></span><span class=line><span class=cl><span class=c1>#   2 = No updates available</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># Author: Tomi Juntunen &lt;erani@iki.fi&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># This program is free software: you can redistribute it and/or modify</span>
</span></span><span class=line><span class=cl><span class=c1># it under the terms of the GNU General Public License as published by</span>
</span></span><span class=line><span class=cl><span class=c1># the Free Software Foundation, either version 3 of the License, or</span>
</span></span><span class=line><span class=cl><span class=c1># (at your option) any later version.</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># This program is distributed in the hope that it will be useful,</span>
</span></span><span class=line><span class=cl><span class=c1># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
</span></span><span class=line><span class=cl><span class=c1># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
</span></span><span class=line><span class=cl><span class=c1># GNU General Public License for more details.</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># You should have received a copy of the GNU General Public License</span>
</span></span><span class=line><span class=cl><span class=c1># along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> ! <span class=nb>command</span> -v jq &gt; /dev/null<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;jq is needed for this script to run&#34;</span> &gt;<span class=p>&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>AUR_API</span><span class=o>=</span><span class=s2>&#34;https://aur.archlinux.org/rpc/?v=5&amp;type=info&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>Args</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>InstalledPackages</span><span class=o>=</span><span class=k>$(</span>pacman --query --foreign<span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Go through installed foreign packages and construct</span>
</span></span><span class=line><span class=cl><span class=c1># HTTP query based on them</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=nb>read</span> -r Package<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nv>PackageName</span><span class=o>=</span><span class=si>${</span><span class=nv>Package</span><span class=p>%[[:</span><span class=nv>space</span><span class=p>:]]*</span><span class=si>}</span>
</span></span><span class=line><span class=cl>    <span class=nv>Args</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>Args</span><span class=si>}</span><span class=s2>&amp;arg[]=</span><span class=nv>$PackageName</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>done</span> <span class=o>&lt;&lt;&lt;</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>InstalledPackages</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>Response</span><span class=o>=</span><span class=k>$(</span>curl --silent <span class=s2>&#34;</span><span class=si>${</span><span class=nv>AUR_API</span><span class=si>}</span><span class=s2>&#34;&#34;</span><span class=si>${</span><span class=nv>Args</span><span class=si>}</span><span class=s2>&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nv>Results</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span>jq --raw-output .results <span class=o>&lt;&lt;&lt;</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>Response</span><span class=si>}</span><span class=s2>&#34;</span><span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>Output</span><span class=o>=</span><span class=s2>$&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=nb>read</span> -r Package<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nv>PackageName</span><span class=o>=</span><span class=si>${</span><span class=nv>Package</span><span class=p>%[[:</span><span class=nv>space</span><span class=p>:]]*</span><span class=si>}</span>
</span></span><span class=line><span class=cl>    <span class=nv>InstalledPackageVersion</span><span class=o>=</span><span class=si>${</span><span class=nv>Package</span><span class=p>#*[[:</span><span class=nv>space</span><span class=p>:]]</span><span class=si>}</span>
</span></span><span class=line><span class=cl>    <span class=nv>RemotePackage</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>RemotePackageInfo</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=nb>read</span> -r Remote<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>do</span>  
</span></span><span class=line><span class=cl>        <span class=nv>RemotePackage</span><span class=o>=</span><span class=k>$(</span>jq --raw-output .Name <span class=o>&lt;&lt;&lt;</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>Remote</span><span class=si>}</span><span class=s2>&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=o>[[</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>RemotePackage</span><span class=si>}</span><span class=s2>&#34;</span> !<span class=o>=</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>PackageName</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> <span class=k>continue</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>RemotePackageInfo</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>Remote</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>break</span>
</span></span><span class=line><span class=cl>    <span class=k>done</span> <span class=o>&lt;&lt;&lt;</span> <span class=s2>&#34;</span><span class=k>$(</span>jq --compact-output <span class=s1>&#39;.[]&#39;</span> <span class=o>&lt;&lt;&lt;</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>Results</span><span class=si>}</span><span class=s2>&#34;</span><span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[[</span> -z <span class=si>${</span><span class=nv>RemotePackageInfo</span><span class=si>}</span> <span class=o>]]</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;No package info found for package </span><span class=si>${</span><span class=nv>PackageName</span><span class=si>}</span><span class=s2>&#34;</span> &gt;<span class=p>&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl>        <span class=k>continue</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nv>RemotePackageVersion</span><span class=o>=</span><span class=k>$(</span>jq --raw-output .Version <span class=o>&lt;&lt;&lt;</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>RemotePackageInfo</span><span class=si>}</span><span class=s2>&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Check if the remote package is of a newer version than installed one and store results</span>
</span></span><span class=line><span class=cl>    <span class=c1># in the output string</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[[</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>RemotePackageVersion</span><span class=si>}</span><span class=s2>&#34;</span> !<span class=o>=</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>InstalledPackageVersion</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>]]</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>[[</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>Output</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span> <span class=o>]]</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>then</span>
</span></span><span class=line><span class=cl>            <span class=nv>Output</span><span class=o>=</span>$<span class=s2>&#34;</span><span class=si>${</span><span class=nv>Output</span><span class=si>}${</span><span class=nv>PackageName</span><span class=si>}</span><span class=s2> </span><span class=si>${</span><span class=nv>InstalledPackageVersion</span><span class=si>}</span><span class=s2> -&gt; </span><span class=si>${</span><span class=nv>RemotePackageVersion</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span>
</span></span><span class=line><span class=cl>        <span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nv>Output</span><span class=o>=</span>$<span class=s2>&#34;</span><span class=si>${</span><span class=nv>Output</span><span class=si>}</span><span class=s2>\n</span><span class=si>${</span><span class=nv>PackageName</span><span class=si>}</span><span class=s2> </span><span class=si>${</span><span class=nv>InstalledPackageVersion</span><span class=si>}</span><span class=s2> -&gt; </span><span class=si>${</span><span class=nv>RemotePackageVersion</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>done</span> <span class=o>&lt;&lt;&lt;</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>InstalledPackages</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> -z <span class=s2>&#34;</span><span class=si>${</span><span class=nv>Output</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>]]</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>2</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> -e <span class=s2>&#34;</span><span class=si>${</span><span class=nv>Output</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>0</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span></code></pre></div><h3 id=installing-update>Installing Update<a hidden class=anchor aria-hidden=true href=#installing-update>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># Update an AUR package to latest version (using Git and makepkg).</span>
</span></span><span class=line><span class=cl><span class=c1># Return codes:</span>
</span></span><span class=line><span class=cl><span class=c1>#   0 = Updates available</span>
</span></span><span class=line><span class=cl><span class=c1>#   1 = Something went wrong</span>
</span></span><span class=line><span class=cl><span class=c1>#   2 = No updates available</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># Author: Tomi Juntunen &lt;erani@iki.fi&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># This program is free software: you can redistribute it and/or modify</span>
</span></span><span class=line><span class=cl><span class=c1># it under the terms of the GNU General Public License as published by</span>
</span></span><span class=line><span class=cl><span class=c1># the Free Software Foundation, either version 3 of the License, or</span>
</span></span><span class=line><span class=cl><span class=c1># (at your option) any later version.</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># This program is distributed in the hope that it will be useful,</span>
</span></span><span class=line><span class=cl><span class=c1># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
</span></span><span class=line><span class=cl><span class=c1># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
</span></span><span class=line><span class=cl><span class=c1># GNU General Public License for more details.</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># You should have received a copy of the GNU General Public License</span>
</span></span><span class=line><span class=cl><span class=c1># along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>AUR_API</span><span class=o>=</span><span class=s2>&#34;https://aur.archlinux.org/rpc/?v=5&amp;type=info&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> print_usage <span class=o>{</span>
</span></span><span class=line><span class=cl>    cat <span class=s>&lt;&lt;EOF
</span></span></span><span class=line><span class=cl><span class=s>Update an AUR package
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>Usage:
</span></span></span><span class=line><span class=cl><span class=s>    aur-update [options] [packagename]
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>Options:
</span></span></span><span class=line><span class=cl><span class=s>  Options passed to Makepkg. See makepkg(8) for details.
</span></span></span><span class=line><span class=cl><span class=s>    -r      Remove unneeded dependencies after install.
</span></span></span><span class=line><span class=cl><span class=s>    -i      Install package.
</span></span></span><span class=line><span class=cl><span class=s>    -c      Clean leftover files after install.
</span></span></span><span class=line><span class=cl><span class=s>    -s      Install required dependencies.
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> check_update <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>Response</span><span class=o>=</span><span class=k>$(</span>curl --silent <span class=s2>&#34;</span><span class=si>${</span><span class=nv>AUR_API</span><span class=si>}</span><span class=s2>&amp;arg[]=</span><span class=nv>$1</span><span class=s2>&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>    <span class=nv>RemoteVersion</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span>jq --raw-output .results<span class=o>[</span>0<span class=o>]</span>.Version <span class=o>&lt;&lt;&lt;</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>Response</span><span class=si>}</span><span class=s2>&#34;</span><span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Installed version: </span><span class=nv>$2</span><span class=s2>, remote version: </span><span class=si>${</span><span class=nv>RemoteVersion</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[[</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>RemoteVersion</span><span class=si>}</span><span class=s2>&#34;</span> !<span class=o>=</span> <span class=nv>$2</span> <span class=o>]]</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=m>0</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=m>2</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> ! <span class=nb>command</span> -v jq &gt; /dev/null<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;jq is needed for this script to run&#34;</span> &gt;<span class=p>&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> -z <span class=s2>&#34;</span><span class=si>${</span><span class=nv>AUR_PACKAGES_PATH</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>]]</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;AUR_PACKAGES_PATH not set&#34;</span> &gt;<span class=p>&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> ! -d <span class=s2>&#34;</span><span class=si>${</span><span class=nv>AUR_PACKAGES_PATH</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>]]</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;AUR_PACKAGES_PATH does not exist&#34;</span> &gt;<span class=p>&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>MAKEPKG_OPTS</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=nb>getopts</span> <span class=s2>&#34;risch&#34;</span> Opt<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>Opt</span><span class=si>}</span><span class=s2>&#34;</span> in
</span></span><span class=line><span class=cl>        h<span class=o>)</span>
</span></span><span class=line><span class=cl>            print_usage
</span></span><span class=line><span class=cl>            <span class=nb>exit</span> <span class=m>0</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>        r<span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=nv>MAKEPKG_OPTS</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>MAKEPKG_OPTS</span><span class=si>}</span><span class=s2>-r &#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>        i<span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=nv>MAKEPKG_OPTS</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>MAKEPKG_OPTS</span><span class=si>}</span><span class=s2>-i &#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>        s<span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=nv>MAKEPKG_OPTS</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>MAKEPKG_OPTS</span><span class=si>}</span><span class=s2>-s &#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>        c<span class=o>)</span>
</span></span><span class=line><span class=cl>            <span class=nv>MAKEPKG_OPTS</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>MAKEPKG_OPTS</span><span class=si>}</span><span class=s2>-c &#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>        *<span class=o>)</span>
</span></span><span class=line><span class=cl>            print_usage
</span></span><span class=line><span class=cl>            <span class=nb>exit</span> <span class=m>0</span>
</span></span><span class=line><span class=cl>            <span class=p>;;</span>
</span></span><span class=line><span class=cl>    <span class=k>esac</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>shift</span> <span class=s2>&#34;</span><span class=k>$((</span>OPTIND-1<span class=k>))</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>PackageName</span><span class=o>=</span><span class=nv>$1</span>
</span></span><span class=line><span class=cl><span class=nv>InstalledPackage</span><span class=o>=</span><span class=k>$(</span>pacman --query --foreign <span class=p>|</span> grep <span class=si>${</span><span class=nv>PackageName</span><span class=si>}</span><span class=k>)</span>
</span></span><span class=line><span class=cl><span class=nv>InstalledPackageVersion</span><span class=o>=</span><span class=k>$(</span>cut -d <span class=s1>&#39; &#39;</span> -f <span class=m>2</span> <span class=o>&lt;&lt;&lt;</span> <span class=si>${</span><span class=nv>InstalledPackage</span><span class=si>}</span><span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> -z <span class=s2>&#34;</span><span class=si>${</span><span class=nv>PackageName</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>]]</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Missing package name&#34;</span>
</span></span><span class=line><span class=cl>    print_usage
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>elif</span> <span class=o>[[</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>InstalledPackage</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span> <span class=o>]]</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Package has not been installed&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>check_update <span class=si>${</span><span class=nv>PackageName</span><span class=si>}</span> <span class=si>${</span><span class=nv>InstalledPackageVersion</span><span class=si>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$?</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=m>2</span> <span class=o>]</span> <span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Package has no updates available&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>2</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>WorkDir</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>AUR_PACKAGES_PATH</span><span class=si>}</span><span class=s2>&#34;</span>/<span class=s2>&#34;</span><span class=si>${</span><span class=nv>PackageName</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>_GIT_DEFAULT_BRANCH</span><span class=o>=</span><span class=k>$(</span><span class=nb>cd</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>WorkDir</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span> git remote show origin <span class=p>|</span> grep <span class=s2>&#34;HEAD branch&#34;</span> <span class=p>|</span> cut -d: -f2 <span class=p>|</span> tr -d <span class=s1>&#39; &#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Checking out to default branch in repository&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> ! <span class=o>(</span><span class=nb>cd</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>WorkDir</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span> git checkout <span class=s2>&#34;</span><span class=si>${</span><span class=nv>_GIT_DEFAULT_BRANCH</span><span class=si>}</span><span class=s2>&#34;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Checkout to default branch failed&#34;</span> &gt;<span class=p>&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Fetching remote changes&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> ! <span class=o>(</span><span class=nb>cd</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>WorkDir</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span> git fetch<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Fetching remote changes&#34;</span> &gt;<span class=p>&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Reading remote diff&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> ! <span class=o>(</span><span class=nb>cd</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>WorkDir</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span> git diff <span class=s2>&#34;</span><span class=si>${</span><span class=nv>_GIT_DEFAULT_BRANCH</span><span class=si>}</span><span class=s2>&#34;</span> origin/<span class=s2>&#34;</span><span class=si>${</span><span class=nv>_GIT_DEFAULT_BRANCH</span><span class=si>}</span><span class=s2>&#34;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Diffing changes failed&#34;</span> &gt;<span class=p>&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Are these changes OK? [y|N]&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>read</span> -r Answer
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>Answer</span><span class=o>=</span><span class=si>${</span><span class=nv>Answer</span><span class=k>:-</span><span class=nv>n</span><span class=si>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[[</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>Answer</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;n&#34;</span> <span class=o>]]</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Update cancelled&#34;</span> &gt;<span class=p>&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>elif</span> <span class=o>[[</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>Answer</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;y&#34;</span> <span class=o>]]</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>then</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Pulling remote changes&#34;</span>
</span></span><span class=line><span class=cl>    <span class=o>(</span><span class=nb>cd</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>WorkDir</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span> git pull<span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Running makepkg and installing update&#34;</span>
</span></span><span class=line><span class=cl>    <span class=o>(</span><span class=nb>cd</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>WorkDir</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span> makepkg <span class=s2>&#34;</span><span class=si>${</span><span class=nv>MAKEPKG_OPTS</span><span class=si>}</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Update cancelled&#34;</span> &gt;<span class=p>&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>fi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>exit</span> <span class=m>0</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://kraashen.github.io/tags/linux/>Linux</a></li><li><a href=https://kraashen.github.io/tags/arch/>Arch</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://kraashen.github.io/>tracing bytes</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>